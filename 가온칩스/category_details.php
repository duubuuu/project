<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--에디터-->
    <link href="css/synapeditor.min.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src='css/codemirror.min.css'></script>
    <link rel="stylesheet" href="css/docs.theme.min.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">

    <!-- 페이지버튼 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link rel="stylesheet" href="./css/index.css">
    <title>카테고리 디테일</title> 
</head>

<body>
    <header>
    </header>
    <div class="category_details_container">
        <div class="category_title_box">
            <p>A 프로젝트 / A project01 /</p>
            <input type="text" class="category_title_txt" value="2024년 1월 생산 계획서">
        </div>
        <div class="">
            <div class="order_chk_set">
                <div>
                    <input type="checkbox" class="order_chk_box" id="order_chk_box_latest">
                    <label for="order_chk_box_latest" class="order_chk_box_label"></label>
                    <label for="order_chk_box_latest" class="order_chk_box_label_text">최신순</label>
                </div>
                <div>
                    <input type="checkbox" class="order_chk_box" id="order_chk_box_oldest">
                    <label for="order_chk_box_oldest" class="order_chk_box_label"></label>
                    <label for="order_chk_box_oldest" class="order_chk_box_label_text">오래된순</label>
                </div>
            </div>
            <div class="history_board_wrap">
               <table>
                    <!-- <caption>캡션</caption> -->
                    <thead>
                        <tr>
                            <th scope="col">
                                히스토리 일자
                            </th>
                            <th scope="col">
                                작성자
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="">
                            <td>
                                <span class="category_title_txt" id="">
                                    2024년 2월 생산 계획서 
                                </span>
                                <span class="datetime">
                                    2024.02.28 12:00
                                </span>
                                수정
                            </td>
                            <td class="writer">
                                영업 1팀 김OO
                            </td>
                        </tr>
                        <tr class="">
                            <td>
                                <span class="category_title_txt" id="">
                                    2024년 2월 생산 계획서 
                                </span>
                                <span class="datetime">
                                    2024.02.28 12:00
                                </span>
                                수정
                            </td>
                            <td class="writer">
                                영업 1팀 김OO
                            </td>
                        </tr>
                        <tr class="">
                            <td>
                                <span class="category_title_txt" id="">
                                    2024년 2월 생산 계획서 
                                </span>
                                <span class="datetime">
                                    2024.02.28 12:00
                                </span>
                                수정
                            </td>
                            <td class="writer">
                                영업 1팀 김OO
                            </td>
                        </tr>
                        <tr class="">
                            <td>
                                <span class="category_title_txt" id="">
                                    2024년 2월 생산 계획서 
                                </span>
                                <span class="datetime">
                                    2024.02.28 12:00
                                </span>
                                수정
                            </td>
                            <td class="writer">
                                영업 1팀 김OO
                            </td>
                        </tr>
                        <tr class="">
                            <td>
                                <span class="category_title_txt" id="">
                                    2024년 2월 생산 계획서 
                                </span>
                                <span class="datetime">
                                    2024.02.28 12:00
                                </span>
                                수정
                            </td>
                            <td class="writer">
                                영업 1팀 김OO
                            </td>
                        </tr>
                        <tr class="">
                            <td>
                                <span class="category_title_txt" id="">
                                    2024년 2월 생산 계획서 
                                </span>
                                <span class="datetime">
                                    2024.02.28 12:00
                                </span>
                                수정
                            </td>
                            <td class="writer">
                                영업 1팀 김OO
                            </td>
                        </tr>
                        <tr class="">
                            <td>
                                <span class="category_title_txt" id="">
                                    2024년 2월 생산 계획서 
                                </span>
                                <span class="datetime">
                                    2024.02.28 12:00
                                </span>
                                수정
                            </td>
                            <td class="writer">
                                영업 1팀 김OO
                            </td>
                        </tr>
                        <tr class="">
                            <td>
                                <span class="category_title_txt" id="">
                                    2024년 2월 생산 계획서 
                                </span>
                                <span class="datetime">
                                    2024.02.28 12:00
                                </span>
                                수정
                            </td>
                            <td class="writer">
                                영업 1팀 김OO
                            </td>
                        </tr>
                        <tr class="">
                            <td>
                                <span class="category_title_txt" id="">
                                    2024년 2월 생산 계획서 
                                </span>
                                <span class="datetime">
                                    2024.02.28 12:00
                                </span>
                                수정
                            </td>
                            <td class="writer">
                                영업 1팀 김OO
                            </td>
                        </tr>
                        <tr class="">
                            <td>
                                <span class="category_title_txt" id="">
                                    2024년 2월 생산 계획서 
                                </span>
                                <span class="datetime">
                                    2024.02.28 12:00
                                </span>
                                수정
                            </td>
                            <td class="writer">
                                영업 1팀 김OO
                            </td>
                        </tr>
                    </tbody>
               </table>

            </div>
            <div class="history_board_bottom">
                <div class="page_btn_box">
 
                    <nav aria-label="Page navigation example">
                        <ul class="pagination">
                        <li class="page-item">
                            <a class="page-link" href="#" aria-label="Previous">
                            <span aria-hidden="true">«</span>
                            </a>
                        </li>
                        <li class="page-item"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item">
                            <a class="page-link" href="#" aria-label="Next">
                            <span aria-hidden="true">»</span>
                            </a>
                        </li>
                        </ul>
                    </nav>
        
               </div>
            </div>
        </div>
    </div>
</body>
<script src="script.js">  </script>
<script>
    $(document).ready(function() {
        setupPagination();
        });

        function setupPagination(){
        const rowsPerPage = 12;
        const rows = document.querySelectorAll('.product-list li');
        const rowsCount = rows.length;
        const pageCount = Math.ceil(rowsCount / rowsPerPage);
        const numbers = document.querySelector('#numbers');
        const prevPageBtn = document.querySelector('.pagination .fa-arrow-left');
        const nextPageBtn = document.querySelector('.pagination .fa-arrow-right');
        let pageActiveIdx =0; //현재 페이지 그룹의 번호
        let currentPage = 0;  //현재 보고있는 페이제네이션 번호
        let maxPageNum =3; //페이지그룹 최대 개수

        console.log("rowsCount",rowsCount);
        console.log("rowsCount",pageCount);

        for (let i = 1; i <= pageCount; i++) {

            numbers.innerHTML += `<li><a href="">${i}</a></li>`;
        }

        //페이지네이션 클릭
        const numbersBtn = numbers.querySelectorAll('a');


        //페이지네이션 번호 감추기
        for(nb of numbersBtn){
            nb.style.display = 'none';
        }


        numbersBtn.forEach((item, idx)=>{
            item.addEventListener('click',(e)=>{
                e.preventDefault() // 기본기능 막기

                displayRow(idx)
            })

        })

        function displayRow(idx) {

            let start = idx * rowsPerPage;
            let end = start + rowsPerPage;
            let rowsArray = [...rows];


            //let rowsArray = Array.from(rows);
            for(ra of rowsArray) {
                //안보이게 하기
                ra.style.display = 'none';
            }

            let newRows =rowsArray.slice(start, end);
            for(nr of newRows) {
                nr.style.display = '';
            }

            //css 조정
            for(nb of numbersBtn){
                nb.classList.remove('active');
            }
            numbersBtn[idx].classList.add('active');

            //console.log("idx::",idx);

        }//displayRow

        //페이지 랜더링시 페이지네이션 바로 적용
        displayRow(0);

        //페이지네이션 그룹 표시 함수
        function displayPage(num) {
            //페이지네이션 번호 감추기
            for(nb of numbersBtn){
                nb.style.display = 'none';
            }

            let totalPageCount = Math.ceil(pageCount / maxPageNum);
            let pageArr = [...numbersBtn];
            let start =num*maxPageNum;
            let end = start + maxPageNum;
            let pageListArr = pageArr.slice(start, end);

            for(pa of pageListArr) {
                pa.style.display = 'block';
            }

            //첫페이지에 화살표 안보이게하기
            if(pageActiveIdx == 0){
                prevPageBtn.style.display = 'none';
            }else{
                prevPageBtn.style.display = 'block';
            }

            if(pageActiveIdx == totalPageCount-1){
                nextPageBtn.style.display = 'none';
            }else{
                nextPageBtn.style.display = 'block';
            }

        }

        displayPage(0);

        nextPageBtn.addEventListener('click', ()=>{ 
            let nextPageNum = pageActiveIdx*maxPageNum+maxPageNum;
            displayRow(nextPageNum);
            ++pageActiveIdx;
            displayPage(pageActiveIdx);

        });

        prevPageBtn.addEventListener('click', ()=>{

            let prevPageNum = pageActiveIdx*maxPageNum-maxPageNum;
            displayRow(prevPageNum);
            --pageActiveIdx;
            displayPage(pageActiveIdx);
        });

        }
        //-----------pagination End----------------------------------------
</script>
</html>